<!DOCTYPE HTML>
<html>
<head>
    <title>Spy App</title>
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <meta name="keywords" content="Google maps, jQuery, plugin, mobile, iphone, ipad, android, HTML5, Geo search"/>
    <meta name="description" content="Geo search example with jQuery mobile, Google maps and HTML5"/>
    <meta http-equiv="content-language" content="en"/>

    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/>
    <meta name="DC.title" content="Spy App"/>
    <meta name="DC.subject" content="Google maps;jQuery;plugin;mobile;iphone;ipad;android;HTML5;Geo search"/>
    <meta name="DC.description" content="Geo search example with jQuery mobile, Google maps and HTML5"/>
    <meta name="DC.creator" content="Johan S&auml;ll Larsson"/>
    <meta name="DC.language" content="en"/>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.css"/>
    <link rel="stylesheet" href="launch48.css"/>
    <link rel="stylesheet" href="jquery-ui-1.8.13.css"/>
    <link href='http://fonts.googleapis.com/css?family=Permanent+Marker&v1' rel='stylesheet' type='text/css'>
    <style rel="stylesheet">
    
        body {
            background: #ddd;
            font-family:'Permanent Marker', arial, serif;
            color:#000;
        }

        .ui-body-c a.ui-link {
            color: #008595;
            font-weight: bold;
            text-decoration: none;
        }

        

        h2 {
            font-size: 16px;
            overflow: hidden;
            white-space: nowrap;
            display: block;
        }

        .more {
            text-align: center;
        }
    </style>
    <script src="http://www.google.com/jsapi?key=ABQIAAAAahcO7noe62FuOIQacCQQ7RTHkUDJMJAZieEeKAqNDtpKxMhoFxQsdtJdv3FJ1dT3WugUNJb7xD-jsQ"
            type="text/javascript"></script>
    <script type="text/javascript">
        google.load("maps", "3", {'other_params':'sensor=true'});
        google.load("jquery", "1.5");
    </script>
    <script type="text/javascript">
        // Demonstration purpose only...
        $(document).bind("mobileinit", function () {
            $.mobile.ajaxEnabled = true;
        });
    </script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.0a4/jquery.mobile-1.0a4.min.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.map.js"></script>
    <script type="text/javascript" src="ui/jquery-ui-1.8.13.min.js"></script>
    
    <script>
        $(document).ready(function(){
            $(".agent a").click(function(){
                $(".popup").show();
            })
        })
    </script>
</head>

<body>

<div id="gmap-4" class="" data-role="page">
    
    <div class="agent">
        
        <a href="#"></a>
        
    </div>
    
    <div class="hidden popup">
        
            <h5>Hello World</h5>
            
            <form>
                <fieldset>
                    <label class="hidden" for="">Close</label>
                    <button type="submit">close</a>
                </fieldset>
            </form>
            
    </div><!--end popup-->

    <script type="text/javascript">
        $('#gmap-4').live("pageshow", function() {

            $('#map_canvas_2').gmap({ 'center': getLatLng(), 'callback':
                            function (map) {
                                if (navigator.geolocation) {
                                    watch = navigator.geolocation.watchPosition(
                                            function(position) {
                                                $('#map_canvas_2').gmap('clearMarkers');
                                                $('#map_canvas_2').gmap('addMarker', { 'title': 'You are here!', 'bound': true, 'position':new google.maps.LatLng(position.coords.latitude, position.coords.longitude) }, function(map, marker) {
                                                    $('#map_canvas_2').gmap('addInfoWindow', { 'position': marker.getPosition(), 'content': 'You are here!' }, function(iw) {
                                                        $(marker).click(function() {
                                                            iw.open(map, marker);
                                                        });
                                                    });
                                                    map.panTo(marker.getPosition());
                                                });
                                            }
                                    );
                                }
                            }
                    });

            function getLatLng() {
                if (google.loader.ClientLocation != null) {
                    return new google.maps.LatLng(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
                }
                return new google.maps.LatLng(59.3426606750, 18.0736160278);
            }

        });

        $('#gmap-4').live("pagehide", function() {
            if (navigator.geolocation) {
                navigator.geolocation.clearWatch(watch);
            }
        });

        $('#gmap-4').live("pagecreate", function() {
            var watch;
        });

    </script>
    <div class="page" data-role="content">

        <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
            <div id="map_canvas_2" style="height:300px;"></div>
        </div>

    </div>
    


    <div id="ft" class="hidden" itemscope itemtype="http://data-vocabulary.org/Person">
        Author:
        <span itemprop="name">Johan S&auml;ll Larsson</span>
				<span itemprop="address" itemscope itemtype="http://data-vocabulary.org/Address">
					<span itemprop="locality">G&ouml;teborg</span>,
					<span itemprop="country-name">Sweden</span>
				</span>
    </div>

</div>
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-17614686-3");
        pageTracker._trackPageview();
    } catch(err) {
    }
</script>
</body>

</html>
